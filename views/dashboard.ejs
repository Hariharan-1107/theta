<!DOCTYPE html>
<html>
<head>
	<title>Dashboard</title>
	<!-- Bootstrap CSS -->
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

	<!-- Font Awesome CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-ePzRihfn/8B1FXT69pNjrjDl5p5y5zfNY16v/G9X6AKQK6/CgU6Sw8Uv1ZOc3qkq6opKjQW8IvO9XgOYdejKZw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<style>
		.profile-area {
			margin-top: 20px;
		}
		.events-section {
			margin-top: 50px;
		}
	</style>
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<a class="navbar-brand" href="/"><i class="fas fa-home"></i></a>
		<a href="/"><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span></a>
		</button>
		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav">
				<li class="nav-item active">
					<a class="nav-link" href="/">Home</a>
				</li>
			</ul>
		</div>
		<form action="/logout">
			<button class="btn btn-outline-primary my-2 my-sm-0" type="submit">Logout</button>
		</form>
	</nav>

	<div class="container profile-area">
		<div class="row">
			<div class="col-md-3">
				<img src="https://robohash.org/<%= user.fname %>?set=set4&size=150x150" alt="Profile Picture" class="img-fluid rounded-circle">
			</div>
			<div class="col-md-9">
				<h2><%= user.fname%> <%=user.lname %> </h2>
				<p>Email: <%= user.username %></p>
				<p>Phone: <%= user.ph %></p>
			</div>
		</div>
	</div>
	<hr>
	<div class="container events-section">
		<h3 class="text-center">Events Registered</h3>
		<div class="card-deck">
		  <% if (user.events.name.length === 0) { %>
			<p class="text-center">You have not registered for any events yet. <br><br> <a href="/events"><button class="btn btn-success">Register for an Event</button></a></p>
		  <% }else{ %>
			<% for (var i = 0; i < user.events.name.length; i++) { %>
				<div class="accordion" id="accordionExample">
				  <div class="accordion-item">
					<h2 class="accordion-header">
					  <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse<%= i %>" aria-expanded="true" aria-controls="collapse<%= i %>">
						<%= user.events.name[i] %>
						<% let cluster=user.events.name[i]; %>
					  </button>
					</h2>
					<div id="collapse<%= i %>" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
					  <div class="accordion-body">
						<%user.events.eventArray.forEach(event=>{%>
							<ul>
								<li>
									<%=event%>
								</li>
							</ul>
						<%})%>
					  </div>
					</div>
				  </div>
				</div>
			  <% } %>
			<%}%>
		</div>
	  </div>
	  



	<!-- jQuery and Bootstrap JS -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>